# ĞœĞµĞ¼Ğ¾Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ useMemo, React.memo

Memoization â€” Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚, Ñ‡Ñ‚Ğ¾ Ğ²Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ, 
Ğ¸ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°Ğ·, ĞºĞ¾Ğ³Ğ´Ğ° Ğ¾Ğ½Ğ° Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾, 
Ğ¾Ğ½Ğ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ² 
ĞºÑÑˆĞµ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¹.

ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğµ ÑÑ‚Ğ¾Ğ¹ memoized 
Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ 
(Ğ¸Ğ»Ğ¸ Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ÑÑ‚ÑÑ, Ñ‡Ñ‚Ğ¾ Ğ±Ñ‹ Ğ’Ñ‹ Ğ½Ğ¸ Ğ´ĞµĞ»Ğ°Ğ»Ğ¸ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ñ‚ĞµĞ»Ğ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸). 
ĞŸĞµÑ€ĞµĞ´ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸ĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ²Ñ‹ 
Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ Ğ¸Ñ… Ğ² ĞºÑÑˆĞµ Ğ¿Ğ¾Ğ´ ĞºĞ»ÑÑ‡Ğ¾Ğ¼, 
ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ñ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸.

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ñ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ¾Ğ¹

Ğ£ Ğ½Ğ°Ñ ĞµÑÑ‚ÑŒ Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ `App.tsx`.
ĞĞ½ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚: 
- Ğ´Ğ²Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ `count1, count2`
- Ğ´Ğ¾Ñ‡ĞµÑ€Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ `Count.tsx` 
- Ğ´Ğ¾Ñ‡ĞµÑ€Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ `IsFine.tsx`

ĞŸÑ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ¸Ğ· Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… `count1, count2`,
Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ ÑĞµÑ‚Ñ‚ĞµÑ€Ğ°,
ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¸Ğ· Ğ´Ğ¾Ñ‡ĞµÑ€Ğ½Ğ¸Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² `Count.tsx, IsFine.tsx`
Ğ±ÑƒĞ´ĞµÑ‚ Ñ€ĞµÑ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ñ‚ÑŒÑÑ.
Ğ¡ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ `getResult()`, ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ° `IsFine.tsx`,
Ğ¼Ñ‹ Ğ¼Ğ¾Ğ¶ĞµĞ¼ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ, ĞºĞ°Ğº ÑĞ¸Ğ»ÑŒĞ½Ğ¾ 
ÑÑ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ²Ğ»Ğ¸ÑÑ‚ÑŒ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ.

```jsx
export const App = () => {
    const [count1, setCount1] = useState(0);
    const [count2, setCount2] = useState(0);
    return (
        <div className={styles.container}>
            <h5>Ğ¡Ñ‡ĞµÑ‚Ñ‡Ğ¸Ğº 1:</h5>
            <div className="counter">
                <button onClick={() => setCount1(count1 + 1)}>+</button>
                <Count id={1} value={count1}/>
            </div>

            <h5>Ğ¡Ñ‡ĞµÑ‚Ñ‡Ğ¸Ğº 2:</h5>
            <div className="counter">
                <button onClick={() => setCount2(count2 + 1)}>+</button>
                <Count id={2} value={count2}/>
                <IsFine value={count2}/>
            </div>
        </div>
    );
};
```

Ğ’ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğµ `Count.tsx`,
Ğ¼Ñ‹ ĞºĞµÑˆĞ¸Ñ€ÑƒĞµĞ¼ Ğ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ğ¼ Ğ² Ğ»Ğ¾Ğ³Ğ¸,
ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ€ĞµÑ€ĞµĞ½Ğ´ĞµÑ€Ğ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°.
```tsx
const render: {[index:string]:number} = {
    count1: 0,
    count2: 0
};


export const Count = ({ id, value } :{id: number, value: number}) => {
    console.log(`ğŸ”´ğŸŒš Count${id} render: ${++render[`count${id}`]}`);
    return (
        <div>
            <h1 className="cyan">{value}</h1>
        </div>
    );
};
```
Ğ’ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğµ `IsFine.tsx` 
Ñƒ Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğµ 
Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ² Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ `getResult()`
```tsx
let renderCount = 0;

export const IsFine = ({value}:{value: number}) => {
    console.log(`ğŸ”´ğŸŒš isFine render: ${++renderCount}`);
    const getResult = () => {
        let i = 0;
        while (i < 600000000) i ++;
        return value === 5 ? 'ğŸ’£ Ğ­Ñ‚Ğ¾ 5 :D' : 'ğŸ’© Ğ­Ñ‚Ğ¾ Ğ½Ğµ 5 :(';
    };
    return (
        <h3>
            {getResult()}
        </h3>
    );
};
```

## Ğ ĞµÑˆĞ°ĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñƒ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ

Ğ’ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğµ `IsFine.tsx`
Ñƒ Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğµ
Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ² Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ `getResult()`. 
```tsx
const getResult = () => {
        let i = 0;
        while (i < 600000000) i ++;
        return value === 5 ? 'ğŸ’£ Ğ­Ñ‚Ğ¾ 5 :D' : 'ğŸ’© Ğ­Ñ‚Ğ¾ Ğ½Ğµ 5 :(';
    };
```
ĞĞ°Ğ¼ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ğ»Ğ¾ÑÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² ÑĞ»ÑƒÑ‡Ğ°Ğµ 
ĞºĞ¾Ğ³Ğ´Ğ° value Ğ±ÑƒĞ´ĞµÑ‚ Ğ¼ĞµĞ½ÑÑ‚ÑŒÑÑ.

Ğ”ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¼Ñ‹ ÑÑ‚Ğ¾ Ğ±ÑƒĞ´ĞµĞ¼ Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ Ñ…ÑƒĞºĞ° `useMemo`

```tsx
const getResult = useMemo(() => {
    let i = 0;
    while (i < 600000000) i ++;
    return value === 5 ? 'ğŸ’£ Ğ­Ñ‚Ğ¾ 5 :D' : 'ğŸ’© Ğ­Ñ‚Ğ¾ Ğ½Ğµ 5 :(';
}, [value]);
```
useMemo Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ°Ğ½Ğ¾Ğ½Ğ¸Ğ¼Ğ½Ğ¾Ğ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸,
Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ¼Ñƒ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ `getResult` Ğ² ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğµ
`IsFine.tsx`
Ğ±ÑƒĞ´ĞµĞ¼ Ñ‚Ğ°Ğº:

```tsx
export const IsFine = ({value}:{value: number}) => {
    console.log(`ğŸ”´ğŸŒš isFine render: ${++renderCount}`);
    const getResult = useMemo(() => {
        let i = 0;
        while (i < 600000000) i ++;
        return value === 5 ? 'ğŸ’£ Ğ­Ñ‚Ğ¾ 5 :D' : 'ğŸ’© Ğ­Ñ‚Ğ¾ Ğ½Ğµ 5 :(';
    }, [value]);
    return (
        <h3>
            {getResult} // Ğ²Ğ¼ĞµÑÑ‚Ğ¾ getResult()
        </h3>
    );
};
```

## Ğ˜Ğ·Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ÑÑ Ğ¾Ñ‚ Ğ»Ğ¸ÑˆĞ½ĞµĞ³Ğ¾ Ñ€ĞµÑ€ĞµĞ½Ğ´ĞµÑ€Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ². React.memo

Ğ•ÑĞ»Ğ¸ Ğ²Ğ°Ñˆ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Ğ²ÑĞµĞ³Ğ´Ğ° Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ñ‚ Ğ¾Ğ´Ğ½Ğ¾ Ğ¸ Ñ‚Ğ¾
Ğ¶Ğµ Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ¼ĞµĞ½ÑÑÑ‰Ğ¸Ñ…ÑÑ Ğ¿Ñ€Ğ¾Ğ¿ÑĞ°Ñ…,
Ğ²Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¾Ğ±ĞµÑ€Ğ½ÑƒÑ‚ÑŒ ĞµĞ³Ğ¾ Ğ² Ğ²Ñ‹Ğ·Ğ¾Ğ²
React.memo Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ² Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ñ…
ÑĞ»ÑƒÑ‡Ğ°ÑÑ…, Ğ¼ĞµĞ¼Ğ¾Ğ¸Ğ·Ğ¸Ñ€ÑƒÑ Ñ‚ĞµĞ¼ ÑĞ°Ğ¼Ñ‹Ğ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚.

`React.memo !== React.useMemo`
React.memo - ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Ğ²Ñ‹ÑÑˆĞµĞ³Ğ¾ Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞ°, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ 
Ğ´Ğ»Ñ Ğ¼ĞµĞ¼Ğ¾Ğ¸Ğ·aÑ†Ğ¸Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ².

```tsx
const render: {[index: string]: number} = {
    count1: 0,
    count2: 0
};

export const Count = memo(({ id, value } : {id:number, value:number}) => {
    console.log(`ğŸ”´ğŸŒš Count${id} render: ${++render[`count${id}`]}`);
    return (
        <div>
            <h1 className="cyan">{value}</h1>
        </div>
    );
});
```

```tsx
let renderCount = 0;

export const IsFine = memo(({value}:{value: number}) => {
    console.log(`ğŸ”´ğŸŒš isFine render: ${++renderCount}`);
    const getResult = useMemo(() => {
        let i = 0;
        while (i < 600000000) i ++;
        return value === 5 ? 'ğŸ’£ Ğ­Ñ‚Ğ¾ 5 :D' : 'ğŸ’© Ğ­Ñ‚Ğ¾ Ğ½Ğµ 5 :(';
    }, [value]);
    return (
        <h3>
            {getResult}
        </h3>
    );
});
```

## ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµÑ€ĞµĞ½Ğ´ĞµÑ€ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ° Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒÑ ÑĞ²Ğ¾ĞµĞ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

ĞŸĞ¾ÑĞ»Ğµ Ğ¼ĞµĞ¼Ğ¾Ğ¸Ğ·aÑ†Ğ¸Ğ¸ IsFine, Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€ĞµĞ½Ğ´ĞµÑ€ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°,
Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ `getResult()`.

ĞĞ¾ Ğ¼Ñ‹ Ğ²Ğ¸Ğ´Ğ¸Ğ¼, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¾ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ,
ĞºĞ¾Ğ³Ğ´Ğ° props, Ñ€Ğ°Ğ²ĞµĞ½ 5. Ğ˜Ğ½Ğ°Ñ‡Ğµ, ÑÑ‚Ğ¾ Ğ»Ğ¸ÑˆĞ½ĞµĞµ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ².

Ğ’Ğ¾ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ ĞºĞ¾Ğ»Ğ±ÑĞºĞµ Ğ¼Ğ¾Ğ¶ĞµĞ¼ Ğ¾Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ Ğ¾Ñ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°
ĞºĞ°Ğº Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğµ Ğ½Ğ¸Ğ¶Ğµ.
```tsx
export const IsFine = memo(({value}:{value: number}) => {
    console.log(`ğŸ”´ğŸŒš isFine render: ${++renderCount}`);
    const getResult = useMemo(() => {
        let i = 0;
        while (i < 600000000) i ++;
        return value === 5 ? 'ğŸ’£ Ğ­Ñ‚Ğ¾ 5 :D' : 'ğŸ’© Ğ­Ñ‚Ğ¾ Ğ½Ğµ 5 :(';
    }, [value]);
    return (
        <h3>
            {getResult}
        </h3>
    );
}, (prevProps, nextProps) => {
    return !(nextProps.value === 5 || nextProps.value === 6);
});
```






